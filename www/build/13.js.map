{"version":3,"sources":["../../src/pages/begin/begin.ts","../../src/pages/begin/begin.module.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { LoadingService } from './../../services/loading.service';\nimport { RecommendationPage } from './../recommendation/recommendation';\nimport { ResultSelectionPage } from './../result.selection/result.selection';\nimport { Question, ColsQuestion, NodeValues, UpPropagationParams } from './../../models/recommendation.model';\nimport { Component, ErrorHandler } from '@angular/core';\n\nimport { NavController, LoadingController, Loading, AlertController, NavParams, IonicPage } from 'ionic-angular';\nimport { RecommendationService } from \"../../services/recommendation.service\";\nimport { isFormFilled, filterZero, captureState } from '../../utils/common.util';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../models/state.model';\nimport { RecommActions } from '../../actions/recomm.actions';\nimport { AlertService } from '../../services/alert.service';\n\n@IonicPage()\n@Component({\n  selector: 'page-begin',\n  template: `\n    <ion-header>\n      <ion-navbar color=\"sky\">\n        <ion-title>Model Interaksi 1</ion-title>\n      </ion-navbar>\n    </ion-header>\n    <ion-content *ngIf=\"questions\" class=\"card-background-page\">\n      <h6 ion-text style=\"font-size: small;\" color=\"ocean\" class=\"highlight\">\n        Perbarui tingkat prioritas anda <br> pada kategori dibawah ini\n      </h6>\n      <ion-grid>\n        <ion-row *ngFor=\"let cols of colsQuestions\">\n          <ion-col col-6 *ngFor=\"let col of cols.cols\">\n            <ion-card>\n              <img style=\"width: 100%;\" [src]=\"col.image\">\n              <div class=\"card-title\">{{col.name}}</div>\n              <div class=\"card-subtitle\" *ngIf=\"findIndex(col.name) != -1 && questionsValue[findIndex(col.name)].pref > 0\">{{questionsValue[findIndex(col.name)].pref * 100}}</div>\n              <ion-range \n                step=\"10\" \n                style=\"top: 15% !important\" \n                class=\"card-title\" \n                (ionChange)=\"changeValue(col.name, $event)\" \n                color=\"danger\" \n                pin=\"true\">\n              </ion-range>\n              <button style=\"font-size: smaller\" (click)=\"col.showDesc = !col.showDesc\" ion-button clear small color=\"fire\" icon-start>\n                <ion-icon *ngIf=\"!col.showDesc\" name='arrow-dropdown'></ion-icon>\n                <ion-icon *ngIf=\"col.showDesc\" name='arrow-dropup'></ion-icon>\n                Deskripsi\n              </button>\n            </ion-card>\n            <ion-card *ngIf=\"col.showDesc\">\n              <p style=\"padding: 10px; font-size: smaller;\">\n                {{col.description}}\n              </p>\n            </ion-card>\n          </ion-col>\n        </ion-row>\n      </ion-grid>   \n    </ion-content> \n    <ion-footer style=\"height: 10%;\">        \n      <button color=\"fire\" style=\"height: 100%;\" ion-button block (click)=\"navigate()\">\n        <p>Lanjut</p>\n      </button> \n    </ion-footer>\n\n  `\n})\nexport class BeginPage {\n\n  private questions: Question[] = [];\n  private colsQuestions: ColsQuestion[] = [];\n  private prevColsQuestions: ColsQuestion[][];\n  private divider = 2;\n  private counter = 0;\n  private questionsValue: NodeValues[] = [];\n  private totalValue = 0;\n  private old: NodeValues[] = [];\n  private assigned: NodeValues[] = [];\n\n  private direction: string;\n  private prevSelected: string[][];\n  private selected: string[] = [];\n  private lastPage: boolean = false;\n  private names: string[] = [];\n  loader: Loading;\n  consoleObject = (str, obj) => console.log(str, JSON.parse(JSON.stringify(obj)));\n\n  constructor(\n    public navCtrl: NavController,\n    private store: Store<AppState>,\n    private recommActions: RecommActions,\n    public alertService: AlertService,\n    private navParams: NavParams,\n    private recommendationService: RecommendationService,\n    private loadingService: LoadingService) {\n    this.questionsValue = this.navParams.get(\"selected\");\n    this.prevSelected = this.navParams.get(\"names\");\n    // console.log(\"DATA\", this.navParams.get(\"loaded\"));\n    this.loadQuestions();\n  }\n\n  next() { }\n  back() { }\n\n  findIndex(name: string): number {\n    return this.questionsValue.findIndex(obj => obj.name == name);\n  }\n\n  changeValue(name: string, value: any) {\n    let realValue = value.value / 100;\n    let idx = this.findIndex(name);\n    if (idx != -1)\n      this.questionsValue[idx].pref = realValue;\n    else {\n      this.questionsValue.push({\n        name: name,\n        pref: realValue,\n        conf: 1\n      })\n    };\n  }\n\n  loadQuestions() {\n    this.questions = [];\n    this.loadingService.presentLoading();\n    let i = 0;\n    this.recommendationService.downPropagation(this.questionsValue).subscribe(questions => {\n      this.questionsValue = [];\n      this.colsQuestions = [];\n      this.old = questions.data;\n      let askedNodes = questions.askedNodes;\n      askedNodes.forEach(question => {\n        this.selected.push(question.name);\n        if (i % this.divider == 0) {\n          this.questions = [];\n          for (let j = i; j < i + this.divider; j++) {\n            if (askedNodes[j])\n              this.questions.push({\n                name: askedNodes[j].name,\n                image: askedNodes[j].image,\n                description: askedNodes[j].description,\n                root: askedNodes[j].root\n            })\n          }\n          this.colsQuestions.push({ cols: this.questions });\n        }\n        i += 1;\n      });\n      this.loadingService.stopLoading();\n      if (this.colsQuestions.length == 0) {\n        this.store.dispatch(this.recommActions.setUpdatedClass(this.questionsValue));\n        // this.navigate();\n      }\n    });\n  }\n\n\n  filterZero(questionsValue: NodeValues[]): NodeValues[] {\n    return questionsValue.filter(q => q.pref > 0);\n  }\n\n  sendData(params: UpPropagationParams){\n    // console.log(\"SEND DATA\", params);\n    this.navCtrl.push('ResultSelectionPage', {\n      params: params\n    })\n  }\n\n  navigate() {\n    let passed = false;\n    let questionsValue: NodeValues[] = filterZero(this.questionsValue, \"pref\");\n    let value = 0;\n    let yes = false;\n    questionsValue.forEach(node => {\n      value += node.pref\n    });\n    passed = true;\n    let names = questionsValue.map(q => q.name);\n    let location = captureState(this.store).user.location;\n    let distance = captureState(this.store).recomm.distance;\n    let params = <UpPropagationParams>{\n      old: this.old,\n      assigned: questionsValue,\n      userLocation: location,\n      distance: distance\n    };\n    // console.log(\"UP\", params);\n    if (value <= 0) {\n      this.alertService.presentAlertWithCallback(\n        \"\", \"Anda yakin tidak memperbarui preferensi anda?\", \"Tidak Yakin\", \"Yakin\")\n        .then(status => {\n          if(status){\n            this.sendData(params);\n          }\n        })\n    }\n    else {\n      this.sendData(params);\n    }\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/begin/begin.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { BeginPage } from './begin';\r\n\r\n@NgModule({\r\n  declarations: [BeginPage],\r\n  imports: [IonicPageModule.forChild(BeginPage)],\r\n  entryComponents: [BeginPage]\r\n})\r\nexport class BeginPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/begin/begin.module.ts"],"sourceRoot":""}